{% extends 'base.html' %}

{% block content %}

<!-- Новинки -->
{% if section == 'new' or not section %}
<h3 class="mb-3">Новинки</h3>

<div class="row g-4">
    {% for product in products %}
        <div class="col-6 col-md-4 col-lg-3">
            <a href="{% url 'product_detail' product.pk %}" class="text-decoration-none text-dark">
                <div class="card h-100">
                    {% if product.image %}
                        <img src="{{ product.image.url }}" class="card-img-top">
                    {% endif %}
                    <div class="card-body">
                        <h6>{{ product.name }}</h6>
                        <p class="price">{{ product.price }} ₽</p>
                    </div>
                </div>
            </a>
        </div>
    {% empty %}
        <p>Нет новинок</p>
    {% endfor %}
</div>
{% endif %}


<!-- Изменения цен -->
{% if section == 'price' or not section %}
<h3 class="mt-5 mb-3">Изменения цен</h3>

<div class="row g-4">
    {% for product in changed_products %}
        <div class="col-6 col-md-4 col-lg-3">
            <a href="{% url 'product_detail' product.pk %}" class="text-decoration-none text-dark">
                <div class="card h-100">
                    {% if product.image %}
                        <img src="{{ product.image.url }}" class="card-img-top">
                    {% endif %}
                    <div class="card-body">
                        <h6>{{ product.name }}</h6>

                        {% if product.price < product.old_price %}
                            <p class="text-success">
                                {{ product.price }} ₽
                            </p>
                        {% else %}
                            <p class="text-danger">
                                {{ product.price }} ₽
                            </p>
                        {% endif %}

                        <small class="text-muted">
                            Было: {{ product.old_price }} ₽
                        </small>
                    </div>
                </div>
            </a>
        </div>
    {% empty %}
        <p>Нет изменений цен</p>
    {% endfor %}
</div>
{% endif %}

{% endblock %}